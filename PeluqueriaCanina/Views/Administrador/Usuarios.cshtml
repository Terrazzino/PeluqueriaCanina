@using PeluqueriaCanina.Models.Users
@model List<PeluqueriaCanina.Models.Users.Persona>

@{
    ViewData["Title"] = "Usuarios";
}

<div class="container mt-4 text-light">

    <h2 class="fw-bold">Gestión de Usuarios</h2>

    <div class="mt-3">
        <form method="get">
            <select name="tipo" class="form-select w-auto d-inline" onchange="this.form.submit()">
                <option value="Todos" selected="@(ViewBag.TipoSeleccionado == "Todos")">Todos</option>
                <option value="Clientes" selected="@(ViewBag.TipoSeleccionado == "Clientes")">Clientes</option>
                <option value="Peluqueros" selected="@(ViewBag.TipoSeleccionado == "Peluqueros")">Peluqueros</option>
                <option value="Administradores" selected="@(ViewBag.TipoSeleccionado == "Administradores")">Administradores</option>
            </select>
        </form>
    </div>

    <table class="table table-dark table-striped mt-4">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Mail</th>
                <th>Tipo</th>
                <th>Grupos</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var u in Model)
            {
                <tr>
                    <td>@u.Nombre @u.Apellido</td>
                    <td>@u.Mail</td>
                    <td>@u.GetType().Name</td>
                    <td>@string.Join(", ", u.Grupos.Select(g => g.Nombre))</td>
                    <td>
                        <a asp-action="EditRoles" asp-route-id="@u.Id"
                           class="btn btn-primary btn-sm">Editar Roles</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>

</div>
