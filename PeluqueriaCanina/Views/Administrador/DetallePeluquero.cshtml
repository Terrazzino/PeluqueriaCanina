@{
    ViewData["Title"] = "Detalle de " + ViewBag.Peluquero;
}

<div class="container mt-5">
    <div class="card bg-dark text-light rounded-4 shadow-lg border-0">

        <!-- Header -->
        <div class="card-header bg-gradient rounded-top-4 p-4"
             style="background: linear-gradient(135deg, #ffc107, #ffdd57); color: #222;">
            <h4 class="text-center fw-bold m-0" style="letter-spacing:1px;">
                💈 Reporte de @ViewBag.Peluquero (@ViewBag.Servicio)
            </h4>
        </div>

        <!-- Imagen opcional -->
        <!-- ⬇⬇⬇ PONÉ TU IMAGEN ACÁ (foto del peluquero o banner del servicio) -->
        <!-- <img src="RUTA_DE_TU_IMAGEN" class="img-fluid mx-auto d-block my-3 rounded-3"
             style="max-height:200px; object-fit:cover;" /> -->
        <!-- ⬆⬆⬆ FIN IMAGEN OPCIONAL -->
        <!-- Body -->
        <div class="card-body text-center">

            <canvas id="graficoTurnos" style="max-height:400px"></canvas>

            <div class="mt-4">

                @{
                    var recaudado = ViewBag.Recaudado as decimal? ?? 0m;
                    string claseColor = recaudado < 40000 ? "text-danger fw-bold" :
                    recaudado < 50000 ? "text-warning fw-bold" : "text-success fw-bold";
                }

                <h5 class="mt-3">
                    💵 Total Recaudado:
                    <span class="@claseColor">$@String.Format("{0:N2}", recaudado)</span>
                </h5>

            </div>
        </div>

        <!-- Footer -->
        <div class="card-footer bg-dark text-center rounded-bottom-4">

            <a asp-action="DetalleServicio"
               asp-route-servicio="@(Html.Raw(ViewBag.Servicio))"
               class="btn btn-outline-light rounded-3 me-2">
                ⬅ Volver al servicio
            </a>

            <a asp-action="Reportes"
               class="btn btn-primary rounded-3 fw-semibold">
                🏠 Inicio de reportes
            </a>

        </div>

    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        const datos = {
            labels: ["Realizados", "Cancelados"],
            datasets: [{
                label: "Turnos de @ViewBag.Peluquero",
                data: [@(ViewBag.Realizados ?? 0), @(ViewBag.Cancelados ?? 0)],
                backgroundColor: [
                    "rgba(54, 162, 235, 0.7)",
                    "rgba(255, 99, 132, 0.7)"
                ],
                borderColor: "white",
                borderWidth: 2
            }]
        };

        const ctx = document.getElementById('graficoTurnos').getContext('2d');

        new Chart(ctx, {
            type: "doughnut",
            data: datos,
            options: {
                plugins: {
                    legend: { position: "bottom", labels: { color: "white" } },
                    title: {
                        display: true,
                        text: "Distribución de Turnos",
                        color: "white",
                        font: { size: 16 }
                    }
                }
            }
        });
    </script>
}
